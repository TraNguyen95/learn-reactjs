(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{178:function(e,t,r){},302:function(e,t,r){},303:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(11),s=r.n(c),o=(r(178),r(17)),i=r(344),l=r(158),u=r(362),j=r(353),d=r(347),b=r(346),p=r(357),m=r(349),h=r(340),O=r(348),f=r(306),g=r(156),x=r.n(g),v=r(157),w=r.n(v),S=r(155),y=r.n(S),k=r(7),N=r.n(k),P=r(15),C=r(44),E=r(62),I=r(145),T=r.n(I).a.create({baseURL:"https://api.ezfrontend.com/",headers:{"Content-Type":"application/json"}});T.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),T.interceptors.response.use((function(e){return e.data}),(function(e){console.log(e.response);var t=e.response,r=t.config,n=t.status,a=t.data;if(["/auth/local/register","/auth/local"].includes(r.url)&&400===n){var c=a.data||[],s=(c.length>0?c[0]:{}).messages||[],o=s.length>0?s[0]:{};throw new Error(o.message)}return Promise.reject(e)}));var A,F=T,R={register:function(e){return F.post("/auth/local/register",e)},login:function(e){return F.post("/auth/local",e)}},_={USER:"user",TOKEN:"access_token"},q=Object(E.createAsyncThunk)("users/register",function(){var e=Object(P.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.register(t);case 2:return r=e.sent,localStorage.setItem(_.TOKEN,r.jwt),localStorage.setItem(_.USER,JSON.stringify(r.user)),e.abrupt("return",r.user);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D=Object(E.createAsyncThunk)("users/login",function(){var e=Object(P.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.login(t);case 2:return r=e.sent,localStorage.setItem(_.TOKEN,r.jwt),localStorage.setItem(_.USER,JSON.stringify(r.user)),e.abrupt("return",r.user);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(E.createSlice)({name:"user",initialState:{current:JSON.parse(localStorage.getItem(_.USER))||{},setting:{}},reducers:{logout:function(e){localStorage.removeItem(_.USER),localStorage.removeItem(_.TOKEN),e.current={}}},extraReducers:(A={},Object(C.a)(A,q.fulfilled,(function(e,t){e.current=t.payload})),Object(C.a)(A,D.fulfilled,(function(e,t){e.current=t.payload})),A)}),z=L.actions,B=L.reducer,U=z.logout,J=B,K=r(55),W=r(30),M=r(28),V=r(95),G=r(39),H=r(38),Q=r(354),X=r(2);var Y=function(e){var t=e.form,r=e.name,n=e.label,a=t.formState.errors,c=a[r];return Object(X.jsx)(M.a,{name:r,control:t.control,render:function(e){var t,s=e.field;return Object(X.jsx)(Q.a,Object(H.a)(Object(H.a)({variant:"outlined",margin:"normal"},s),{},{fullWidth:!0,label:n,error:!!c,helperText:null===(t=a[r])||void 0===t?void 0:t.message}))}})},Z=r(345),$=r(361),ee=r(94),te=r.n(ee),re=r(341),ne=r(343),ae=r(360),ce=r(359),se=r(153),oe=r.n(se),ie=r(154),le=r.n(ie),ue=r(342);var je=function(e){var t,r=e.form,a=e.name,c=e.label,s=r.formState,l=r.formState.errors,u=s.touchedFields[a]&&l[a],j=Object(n.useState)(!1),d=Object(o.a)(j,2),b=d[0],p=d[1],m=function(){p((function(e){return!e}))};return Object(X.jsxs)(re.a,{fullWidth:!0,variant:"outlined",margin:"normal",error:!!u,children:[Object(X.jsx)(ae.a,{htmlFor:a,children:c}),Object(X.jsx)(M.a,{name:a,control:r.control,render:function(e){var t,r=e.field;return Object(X.jsx)(ce.a,Object(H.a)(Object(H.a)({},r),{},{id:a,type:b?"text":"password",label:c,endAdornment:Object(X.jsx)(ne.a,{position:"end",children:Object(X.jsx)(i.a,{"aria-label":"toggle password visibility",onClick:m,edge:"end",children:b?Object(X.jsx)(oe.a,{}):Object(X.jsx)(le.a,{})})}),helperText:null===(t=l[a])||void 0===t?void 0:t.message}))}}),Object(X.jsx)(ue.a,{children:null===(t=l[a])||void 0===t?void 0:t.message})]})},de=Object(h.a)((function(e){return{root:{paddingTop:e.spacing(3),position:"relative"},avatar:{margin:"0 auto",backgroundColor:e.palette.secondary.main},title:{textAlign:"center",margin:e.spacing(2,0,3,0)},submit:{margin:e.spacing(3,0,2)},progress:{position:"absolute",top:e.spacing(1),left:0,right:0}}}));var be=function(e){var t=de(),r=G.a().shape({identifier:G.c().required("Please enter your email").email("Please enter valid email adress"),password:G.c().required("Please enter your password")}),n=Object(M.e)({defaultValues:{identifier:"",password:""},resolver:Object(V.a)(r)}),a=function(){var t=Object(P.a)(N.a.mark((function t(r){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.onSubmit)){t.next=4;break}return t.next=4,a(r);case 4:n.reset();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=n.formState.isSubmitting;return Object(X.jsxs)("div",{className:t.root,children:[c&&Object(X.jsx)(Z.a,{className:t.progress}),Object(X.jsx)($.a,{className:t.avatar,children:Object(X.jsx)(te.a,{})}),Object(X.jsx)(f.a,{component:"h3",variant:"h5",className:t.title,children:"Sign In"}),Object(X.jsxs)("form",{onSubmit:n.handleSubmit(a),children:[Object(X.jsx)(Y,{name:"identifier",label:"Email",form:n}),Object(X.jsx)(je,{name:"password",label:"Password",form:n}),Object(X.jsx)(b.a,{type:"submit",variant:"contained",color:"primary",className:t.submit,fullWidth:!0,disabled:c,size:"large",children:"Sign In"})]})]})};var pe=function(e){var t=Object(W.b)(),r=Object(K.b)().enqueueSnackbar,n=function(){var n=Object(P.a)(N.a.mark((function n(a){var c,s;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=D(a),n.next=4,t(c).unwrap();case 4:n.sent,(s=e.closeDialog)&&s(),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("fail to Login",n.t0),r(n.t0.message,{variant:"error"});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}();return Object(X.jsx)("div",{children:Object(X.jsx)(be,{onSubmit:n})})},me=Object(h.a)((function(e){return{root:{paddingTop:e.spacing(3),position:"relative"},avatar:{margin:"0 auto",backgroundColor:e.palette.secondary.main},title:{textAlign:"center",margin:e.spacing(2,0,3,0)},submit:{margin:e.spacing(3,0,2)},progress:{position:"absolute",top:e.spacing(1),left:0,right:0}}}));var he=function(e){var t=me(),r=G.a().shape({fullName:G.c().required("Please enter your full name").test("Should has at least two word","Please enter two word",(function(e){return e.split(" ").length>=2})),email:G.c().required("Please enter your email").email("Please enter valid email adress"),password:G.c().required("Please enter your password").min(6,"Please enter at least 6 characters"),retypePassword:G.c().required("Please enter retype your password").min(6,"Please enter at least 6 characters").oneOf([G.b("password")],"Password doe not match")}),n=Object(M.e)({defaultValues:{fullName:"",email:"",password:"",retypePassword:""},resolver:Object(V.a)(r)}),a=function(){var t=Object(P.a)(N.a.mark((function t(r){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.onSubmit)){t.next=4;break}return t.next=4,a(r);case 4:n.reset();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=n.formState.isSubmitting;return Object(X.jsxs)("div",{className:t.root,children:[c&&Object(X.jsx)(Z.a,{className:t.progress}),Object(X.jsx)($.a,{className:t.avatar,children:Object(X.jsx)(te.a,{})}),Object(X.jsx)(f.a,{component:"h3",variant:"h5",className:t.title,children:"Create an account"}),Object(X.jsxs)("form",{onSubmit:n.handleSubmit(a),children:[Object(X.jsx)(Y,{name:"fullName",label:"Full Name",form:n}),Object(X.jsx)(Y,{name:"email",label:"Email",form:n}),Object(X.jsx)(je,{name:"password",label:"Password",form:n}),Object(X.jsx)(je,{name:"retypePassword",label:"Retype Password",form:n}),Object(X.jsx)(b.a,{type:"submit",variant:"contained",color:"primary",className:t.submit,fullWidth:!0,disabled:c,size:"large",children:"Create an account"})]})]})};var Oe=function(e){var t=Object(W.b)(),r=Object(K.b)().enqueueSnackbar,n=function(){var n=Object(P.a)(N.a.mark((function n(a){var c,s;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a.username=a.email,c=q(a),n.next=5,t(c).unwrap();case 5:n.sent,r("Resgister Successfully!!!",{variant:"success"}),(s=e.closeDialog)&&s(),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.log("fail to register",n.t0),r(n.t0.message,{variant:"error"});case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}();return Object(X.jsx)("div",{children:Object(X.jsx)(he,{onSubmit:n})})},fe=r(53),ge=Object(h.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},link:{color:"#fff",textDecoration:"none"},closeIcon:{position:"absolute",top:e.spacing(1),right:e.spacing(1),color:e.palette.grey[500],zIndex:1}}})),xe="login",ve="register";function we(){var e=Object(W.c)((function(e){return e.user.current})).id,t=Object(W.b)(),r=Object(n.useState)(!1),a=Object(o.a)(r,2),c=a[0],s=a[1],h=Object(n.useState)(xe),g=Object(o.a)(h,2),v=g[0],S=g[1],k=Object(n.useState)(null),N=Object(o.a)(k,2),P=N[0],C=N[1],E=function(){s(!1)},I=function(e){C(null)},T=ge();return Object(X.jsxs)("div",{className:T.root,children:[Object(X.jsx)(d.a,{position:"static",children:Object(X.jsxs)(O.a,{children:[Object(X.jsx)(y.a,{className:T.menuButton}),Object(X.jsx)(f.a,{variant:"h6",className:T.title,children:Object(X.jsx)(fe.b,{className:T.link,to:"/",children:"Tea Shop"})}),Object(X.jsx)(fe.c,{to:"/products",children:Object(X.jsx)(b.a,{className:T.link,children:"Products"})}),Object(X.jsx)(fe.c,{to:"/todo",children:Object(X.jsx)(b.a,{className:T.link,children:"Todo"})}),!e&&Object(X.jsx)(b.a,{className:T.link,onClick:function(){s(!0)},color:"inherit",children:"Login"}),e&&Object(X.jsx)(i.a,{color:"inherit",onClick:function(e){C(e.currentTarget)},children:Object(X.jsx)(x.a,{})})]})}),Object(X.jsxs)(l.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},anchorEl:P,keepMounted:!0,open:Boolean(P),onClose:I,getContentAnchorEl:null,children:[Object(X.jsx)(u.a,{onClick:I,children:"My account"}),Object(X.jsx)(u.a,{onClick:function(){var e=U();t(e)},children:"Logout"})]}),Object(X.jsxs)(p.a,{open:c,onClose:E,disableBackdropClick:!0,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,children:[Object(X.jsx)(i.a,{className:T.closeIcon,onClick:E,children:Object(X.jsx)(w.a,{})}),Object(X.jsxs)(m.a,{children:[v===ve&&Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Oe,{closeDialog:E}),Object(X.jsx)(j.a,{textAlign:"center",children:Object(X.jsx)(b.a,{color:"primary",onClick:function(){S(xe)},children:"Already have an account. Login here"})})]}),v===xe&&Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(pe,{closeDialog:E}),Object(X.jsx)(j.a,{textAlign:"center",children:Object(X.jsx)(b.a,{color:"primary",onClick:function(){S(ve)},children:"Dont have an account. Register here"})})]})]})]})]})}var Se=r(20),ye=(r(302),(0,r(62).createSlice)({name:"counter",initialState:0,reducers:{increase:function(e){return e+1},decrease:function(e,t){return e-1}}})),ke=ye.actions,Ne=ye.reducer,Pe=ke.increase,Ce=ke.decrease,Ee=Ne,Ie=Object(h.a)({root:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:32,padding:"0 30px"}});var Te=function(e){var t=Ie(),r=Object(W.b)(),n=Object(W.c)((function(e){return e.counter}));return Object(X.jsxs)("div",{children:["Counter: ",n,Object(X.jsxs)("div",{children:[Object(X.jsx)(b.a,{className:t.root,onClick:function(){var e=Pe();r(e)},children:"Increase"}),Object(X.jsx)(b.a,{className:t.root,onClick:function(){var e=Ce();r(e)},children:"Decrease"})]})]})},Ae=r(352),Fe=r(350),Re=r(305),_e={getAll:function(e){return Object(P.a)(N.a.mark((function t(){var r,n,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Object(H.a)({},e))._start=!e._page||e._page<=1?0:(e._page-1)*(e._limit||50),delete r._page,t.next=5,F.get("./products",{params:r});case 5:return n=t.sent,t.next=8,F.get("./products/count",{params:r});case 8:return a=t.sent,t.abrupt("return",{data:n,pagination:{page:e._page,limit:e._limit,total:a}});case 10:case"end":return t.stop()}}),t)})))()},get:function(e){var t="/products/".concat(e);return F.get(t)},add:function(e){return F.post("/products",e)},update:function(e){var t="/products/".concat(e.id);return F.path(t,e)},remove:function(e){var t="/products/".concat(e);return F.delete(t)}},qe=r(351);function De(e){var t=e.length;return Object(X.jsx)(j.a,{children:Object(X.jsx)(Fe.a,{container:!0,children:Array.from(new Array(t)).map((function(e,t){return Object(X.jsx)(Fe.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsxs)(j.a,{padding:1,children:[Object(X.jsx)(qe.a,{variant:"rect",width:"100%",height:200}),Object(X.jsx)(qe.a,{}),Object(X.jsx)(qe.a,{width:"60%"})]})},t)}))})})}De.defaultProps={length:6};var Le=De;var ze=function(e){var t,r=e.product,n=r.thumbnail?"".concat("https://api.ezfrontend.com").concat(null===(t=r.thumbnail)||void 0===t?void 0:t.url):"https://via.placeholder.com/444";return Object(X.jsxs)(j.a,{padding:1,children:[Object(X.jsx)(j.a,{padding:1,children:Object(X.jsx)("img",{src:n,alt:r.name,width:"100%"})}),Object(X.jsx)(f.a,{variant:"body2",children:r.name}),Object(X.jsxs)(f.a,{variant:"body2",children:[Object(X.jsxs)(j.a,{component:"span",fontSize:16,fontWeight:"bold",mr:1,children:[" ",new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(r.salePrice)]}),r.promotionPercent>0?" -".concat(r.promotionPercent,"%"):""]})]})};function Be(e){var t=e.productList;return Object(X.jsx)(j.a,{children:Object(X.jsx)(Fe.a,{container:!0,children:t.map((function(e){return Object(X.jsx)(Fe.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(X.jsx)(ze,{product:e})},e.id)}))})})}Be.defaultProps={productList:[]};var Ue=Be,Je=r(355),Ke=Object(h.a)((function(e){return{root:{},left:{width:"250px"},right:{flex:"1 1 0"}}}));var We=function(e){var t=Ke(),r=Object(n.useState)([]),a=Object(o.a)(r,2),c=a[0],s=a[1],i=Object(n.useState)(!0),l=Object(o.a)(i,2),u=l[0],d=l[1],b=Object(n.useState)({limit:10,total:10,page:1}),p=Object(o.a)(b,2),m=p[0],h=p[1],O=Object(n.useState)({_page:1,_limit:10}),f=Object(o.a)(O,2),g=f[0],x=f[1];return Object(n.useEffect)((function(){Object(P.a)(N.a.mark((function e(){var t,r,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.getAll(g);case 3:t=e.sent,r=t.data,n=t.pagination,s(r),console.log(r,n),h(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("fail to fetch product list",e.t0);case 14:d(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()}),[g]),Object(X.jsx)(j.a,{children:Object(X.jsx)(Ae.a,{children:Object(X.jsxs)(Fe.a,{container:!0,spacing:1,children:[Object(X.jsx)(Fe.a,{item:!0,className:t.left,children:Object(X.jsx)(Re.a,{elevation:0,children:"left"})}),Object(X.jsx)(Fe.a,{item:!0,className:t.right,children:Object(X.jsxs)(Re.a,{elevation:0,children:[u?Object(X.jsx)(Le,{}):Object(X.jsx)(Ue,{productList:c})," ",Object(X.jsx)(Je.a,{color:"primary",count:Math.ceil(m.total/m.limit),page:m.page,onChange:function(e,t){x((function(e){return Object(H.a)(Object(H.a)({},e),{},{_page:t})})),console.log("page",t)}})]})})]})})})};var Me=function(e){var t=Object(Se.f)();return Object(X.jsx)(j.a,{pt:4,children:Object(X.jsx)(Se.c,{children:Object(X.jsx)(Se.a,{path:t.url,exact:!0,component:We})})})};var Ve=function(){return Object(K.b)().enqueueSnackbar,Object(X.jsxs)("div",{className:"App",children:[Object(X.jsx)(we,{}),Object(X.jsx)("header",{className:"App-header",children:Object(X.jsxs)(Se.c,{children:[Object(X.jsx)(Se.a,{path:"/todo",component:Te}),Object(X.jsx)(Se.a,{path:"/products",component:Me})]})})]})},Ge=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,365)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},He={counter:Ee,user:J},Qe=Object(E.configureStore)({reducer:He});s.a.render(Object(X.jsx)(a.a.StrictMode,{children:Object(X.jsx)(W.a,{store:Qe,children:Object(X.jsx)(fe.a,{children:Object(X.jsx)(K.a,{anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(X.jsx)(Ve,{})})})})}),document.getElementById("root")),Ge()}},[[303,1,2]]]);
//# sourceMappingURL=main.5d5fcc66.chunk.js.map